[mysqld]
server-id = 10101
socket=/var/lib/mysql/mysql.sock
symbolic-links=0
pid-file=/var/run/mysqld/mysqld.pid
default_storage_engine = InnoDB
autocommit = 1
character_set_server=utf8
collation-server=utf8_general_ci
skip_name_resolve = 1
max_connections = 800
max_connect_errors = 1000
back_log = 300
datadir = /data/mysql/db
transaction_isolation = READ-COMMITTED
max_allowed_packet = 32M
sql_mode = "STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER"
event_scheduler=1
interactive_timeout = 1800
wait_timeout = 1800
log_timestamps=system
join_buffer_size = 8M
tmp_table_size = 16M
read_buffer_size = 8M
read_rnd_buffer_size = 8M
sort_buffer_size = 8M
innodb_file_per_table = 1
innodb_page_size = 16384
innodb_buffer_pool_size = 1G
innodb_sort_buffer_size = 1048576
innodb_data_file_path = ibdata1:32M:autoextend
innodb_log_file_size = 64M
innodb_log_buffer_size = 16M
innodb_log_files_in_group = 3
innodb_file_per_table=1
innodb_lock_wait_timeout = 50
innodb_io_capacity = 200
innodb_io_capacity_max = 2000
innodb_flush_method = O_DIRECT
innodb_buffer_pool_dump_pct = 40
innodb_print_all_deadlocks = 1
log-error=/var/log/mysqld.log
slow_query_log = 1
slow_query_log_file = /data/mysql/logs/slow.log
log_queries_not_using_indexes = 1
log_slow_admin_statements = 1
log_slow_slave_statements = 1
log_throttle_queries_not_using_indexes = 10
expire_logs_days = 7
long_query_time = 2
min_examined_row_limit = 100
master_info_repository = TABLE
relay_log_info_repository = TABLE
log_bin = mysql-bin
binlog_format = row
sync_binlog = 1
slave_skip_errors = ddl_exist_errors
lower_case_table_names=1
[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

#
## include all files from the config directory
##
!includedir /etc/my.cnf.d
[mysql]
socket=/var/lib/mysql/mysql.sock

##########################################################################
数据库内存2G，pod内存多少，最大连接数多少
有没有慢查询
show variables like 'sync_binlog';
show variables like 'sync_binlog';

performance_schema=off 
sync_binlog=1000
innodb_flush_log_at_trx_commit=2
把这个几个放到配置文件里面

